{% load static %}
<!-- Overlay -->
<div id="overlay" class="fixed inset-0 bg-black/50 z-30 hidden" onclick="closeSidebar()"></div>

<!-- Sidebar -->
<aside id="sidebar"
  class="fixed top-0 left-0 z-40 h-screen w-3/4 max-w-[300px] bg-white shadow-md -translate-x-full transition-transform duration-300 p-6">
  <div class="flex items-center justify-between border-b border-slate-200 pb-4 mb-4">
    <img src="{% static 'images/Logo MatchMyCV.png' %}" alt="Logo MatchMyCV" class="h-14">
    <button class="w-8 h-8 grid place-items-center text-slate-500 hover:text-slate-700" onclick="closeSidebar()">Ã—</button>
  </div>

  <nav class="flex flex-col">
    <a href="/" class="px-4 py-3 rounded-md text-slate-500 hover:bg-slate-100">Home</a>
    <a href="/tentang-kami/" class="px-4 py-3 rounded-md text-slate-500 hover:bg-slate-100">About Us</a>
    <a href="/faq/" class="px-4 py-3 rounded-md text-slate-500 hover:bg-slate-100">FAQ</a>
    <a href="/login/" class="px-4 py-3 rounded-md text-slate-500 hover:bg-slate-100">Login</a>
    <a href="/register/" class="px-4 py-3 rounded-md text-slate-500 hover:bg-slate-100">Register</a>
  </nav>
</aside>

<!-- Navbar -->
<header class="sticky top-0 z-20 bg-white border-b border-slate-200">
  <div class="h-18 md:h-18 flex items-center justify-between px-4 md:px-8" style="height: 4.5rem;">
    <div class="flex items-center gap-4">
      <!-- Hamburger (mobile) -->
      <button id="hamburger"
        class="flex md:hidden flex-col gap-1.5 w-6"
        onclick="toggleSidebar()"
        aria-label="Toggle menu">
        <span class="h-0.5 w-full bg-slate-500 rounded transition-all"></span>
        <span class="h-0.5 w-full bg-slate-500 rounded transition-all"></span>
        <span class="h-0.5 w-full bg-slate-500 rounded transition-all"></span>
      </button>

      <a href="/" class="block">
        <img src="{% static 'images/Logo MatchMyCV.png' %}" alt="Logo MatchMyCV" class="h-14">
      </a>
    </div>

    <nav class="hidden md:flex items-center gap-7">
      <a href="/" class="text-[15px] font-regular hover:font-medium active:font-medium text-slate-500 hover:text-blue-600 active:text-blue-600">Home</a>
      <a href="/tentang-kami/" class="text-[15px] font-regular hover:font-medium active:font-medium text-slate-500 hover:text-blue-600 active:text-blue-600">About Us</a>
      <a href="/faq/" class="text-[15px] font-regular hover:font-medium active:font-medium text-slate-500 hover:text-blue-600 active:text-blue-600">FAQ</a>
      <a href="/login/" class="text-[15px] font-regular hover:font-medium active:font-medium text-slate-500 hover:text-blue-600 active:text-blue-600">Login</a>
      <a href="/register/" class="text-[15px] font-regular hover:font-medium active:font-medium text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md">Register</a>
    </nav>
  </div>
</header>

<script>
  window.HeaderInit = function () {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const burger = document.getElementById('hamburger');

    window.toggleSidebar = function () {
      sidebar.classList.toggle('-translate-x-full');
      overlay.classList.toggle('hidden');

      burger.classList.toggle('open');
      const [l1, l2, l3] = burger.querySelectorAll('span');
      if (burger.classList.contains('open')) {
        l1.style.transform = 'translateY(6px) rotate(45deg)';
        l2.style.opacity = '0';
        l3.style.transform = 'translateY(-6px) rotate(-45deg)';
      } else {
        l1.style.transform = '';
        l2.style.opacity = '';
        l3.style.transform = '';
      }
    };

    window.closeSidebar = function () {
      sidebar.classList.add('-translate-x-full');
      overlay.classList.add('hidden');
      const [l1, l2, l3] = burger.querySelectorAll('span');
      burger.classList.remove('open');
      l1.style.transform = '';
      l2.style.opacity = '';
      l3.style.transform = '';
    };

    function norm(p){ return (p || '/').replace(/\/+$/,'/') || '/'; }
    const current = norm(window.location.pathname);
    document.querySelectorAll('header a[href], aside a[href]').forEach(a => {
      if (norm(a.getAttribute('href')) === current) {
        a.classList.add('text-blue-600','font-bold');
        if (a.closest('aside')) a.classList.add('bg-slate-100');
      }
    });
  };
</script>
